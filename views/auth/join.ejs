<%include ../_header.ejs%>
<link rel="stylesheet" type="text/css" href="/stylesheets/auth.css">
<div class="content">
	<div>
		<div class="login_modal t_center">
			<ul class="choose">
				<li><a href="/auth/login">로그인</a></li>
				<li class="on">회원가입</li>
			</ul>
			<form action="/user/register" name="regFrm" method="post" onsubmit="return chkFrm(this)">
				<table class="tb">
					<tr>
						<th>아이디</th>
						<td class="t_left">
							<input type="text" name="id" style="width:150px;" required>
							<button onclick="return false">체크</button>
						</td>
					</tr><tr>
						<th>비밀번호</th>
						<td>
							<input type="password" name="pwd" id="pwd" required>
							<span class="btn_show" _target="#pwd"><i class="fa fa-eye" aria-hidden="true"></i></span>
						</td>
					</tr><tr>
						<th>비밀번호 확인</th>
						<td>
							<input type="password" id="pwd_repeat" required >
							<span class="btn_show" _target="#pwd_repeat"><i class="fa fa-eye" aria-hidden="true"></i></span>
						</td>
					</tr><tr>
						<th>이름</th>
						<td><input type="text" name="name" required></td>
					</tr><tr>
						<th>생년월일</th>
						<td><input type="date" name="birth" required></td>
					</tr><tr>
						<td colspan="2">
							<button>JOIN</button>
						</td>
					</tr>
				</table>
			</form>
		</div>
	</div>
</div>
<script>
	function chkFrm(f){
		console.log($(f).serialize());
		err = 1;
		$('.tb input').each(function(){
			if($(this).hassClass('err'))	err=-1;
			else if($(this).val()=='')		err=-1;
		});
		
		return err>0;
	}
	$('.tb input').each(function(){
		$(this).on('blur',function(){
			if($(this).val()==''){
				$(this).addClass('err');
			}else if($(this).prop('name').indexOf('pwd')>0){
				$(target).removeClass('err');
				if($('#pwd').val()!=$('#pwd_repeat').val()){
					console.log('비밀번호 틀림');
					$('#pwd_repeat').addClass('err');
				}
			}else{
				$(this).removeClass('err');
			}
		});
	});
</script>
<%include ../_footer.ejs%>